{
  "hash": "fb4d77db9ce708736837b1ec8b922de7",
  "result": {
    "markdown": "---\ntitle: 'Cédula Elecciones 2020 usando ggplot2 (parte 2)'\nauthor: 'Samuel Calderon'\ndate: '2020-01-18'\nimage: \"cedula-parte-2.png\"\n\nexecute: \n  warning: false\n---\n\n\nEn el [post anterior](/post/2020-01-15-cedula-2020-ggplot2-parte-1) mostramos cómo crear el \"esqueleto\" de la cédula. En este, en cambio, incluiremos el texto y los logos de los partidos. Primero lo primero, habilitamos los paquetes del tidyverse.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\nNos aseguramos de contar con los objetos creados en el paso anterior. Especialmente el objeto `cedula`, que contiene las instrucciones de nuestro \"esqueleto\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\nls()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"cedula\"          \"has_annotations\" \"instrucciones\"   \"preferencial\"   \n[5] \"rectangulos\"    \n```\n:::\n:::\n\n\nComenzaremos por crear un vector que contenga los nombres de los partidos políticos en contienda, basados en el orden que obtuvieron en el [sorteo](https://www.onpe.gob.pe/sala-prensa/notas-prensa/elecciones-congresales-2020-onpe-sorteo-ubicacion-de-organizaciones-politicas-en-cedulas-sufragio/) realizado por la ONPE para determinar la posición en la cédula. Lo llamamos `partidos`.\n. \n\n::: {.cell}\n\n```{.r .cell-code}\npartidos <- c(\n  \"EL FRENTE AMPLIO POR JUSTICIA, VIDA Y LIBERTAD\",\n  \"FUERZA POPULAR\",\n  \"JUNTOS POR EL PERU\",\n  \"PERU PATRIA SEGURA\",\n  \"TODOS POR EL PERU\",\n  \"ALIANZA PARA EL PROGRESO\",\n  \"PARTIDO MORADO\",\n  \"ACCION POPULAR\",\n  \"AVANZA PAIS – PARTIDO DE INTEGRACION SOCIAL\",\n  \"RENACIMIENTO UNIDO NACIONAL\",\n  \"PODEMOS PERU\",\n  \"UNION POR EL PERU\",\n  \"PARTIDO DEMOCRATICO SOMOS PERU\",\n  \"DEMOCRACIA DIRECTA\",\n  \"PARTIDO APRISTA PERUANO\",\n  \"PERU NACION\",\n  \"FRENTE POPULAR AGRICOLA FIA DEL PERU- FREPAP\",\n  \"PARTIDO POLITICO CONTIGO\",\n  \"PARTIDO POLITICO NACIONAL PERU LIBRE\",\n  \"VAMOS PERU\",\n  \"SOLIDARIDAD NACIONAL\",\n  \"PARTIDO POPULAR CRISTIANO - PPC\")\n```\n:::\n\n\nDel mismo modo que utilizamos una secuencia para generar el objeto `preferencial` en la primera parte, generamos una secuencia para la ubicación de los nombres de los partidos. Esta vez, la generamos directamente dentro de `geom_text()`, la función que nos permite colocar texto en un gráfico de `ggplot`. Tengamos en cuenta que el argumento `size` cambiará según el tamaño en pixeles que le hayamos asignado al gráfico[^1].\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncedula <- cedula +\n  geom_text(\n    aes(x = 0.8, \n        y = seq(\n          from = 27.8, \n          to = 2.6, \n          by = -1.2), \n        label = partidos),\n      fontface = \"bold\",\n      size = 1.5,\n      hjust = 0)\ncedula\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=288}\n:::\n:::\n\n\nLo siguiente es incluir el título de la cédula. Para esto utilizamos nuevamente `geom_text()`. Esta vez será necesario utilizar un *linebreak* (`\\n`) para tener el texto en dos líneas.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncedula <- cedula +\n  geom_text(\n    aes(x = 7.5, \n        y = 30.6, \n        label = \"ELECCIONES CONGRESALES\\nEXTRAORDINARIAS 2020\"), \n    fontface = \"bold\",\n    size = 2.1,\n    lineheight = 0.8)\ncedula\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=288}\n:::\n:::\n\n\nIncluyamos ahora las instrucciones que indican cómo votar. Nuevamente, `geom_text()` nos servirá para lograrlo. En esta ocasión incluiremos más de un *linebreak* en algunos casos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncedula <- cedula +\n  geom_text(\n    aes(x = 6.3, \n        y = 29.6, \n        label = \"ORGANIZACIÓN POLÍTICA\"),\n    fontface = \"bold\",\n    size = 1.2)+\n  geom_text(\n    aes(x = 6.3,\n        y = 28.9,\n        label = \"MARQUE CON UNA CRUZ  +   O UN ASPA   X  DENTRO DEL RECUADRO DEL SÍMBOLO\\nDE SU PREFERENCIA\"),\n    size = 0.9) +\n  geom_text(\n    aes(x = 13.25,\n        y = 29.5,\n        label = \"VOTO\\nPREFERENCIAL\"),\n    fontface = \"bold\",\n    size = 1.05,\n    lineheight = 0.8) +\n  geom_text(\n    aes(x = 13.25,\n        y = 28.9,\n        label = \"SI DESEA COLOQUE DENTRO\\nDE LOS RECUADROS UNO O DOS\\nNÚMEROS DE LOS CANDIDATOS\\nDE SU PREFERENCIA\"),\n    size = 0.54,\n    lineheight = 0.9)\n\ncedula\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=288}\n:::\n:::\n\n\n¡Cada vez estamos más cerca! El siguiente paso es incluir los logos de las agrupaciones políticas.\n\n\n::: {.cell}\n\n:::\n\n\n\n\n[^1]: En esta ocasión, el tamaño del gráfico es de 3 x 6.4 pulgadas, manteniendo la proporción del tamaño oficial.",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}